<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Bank Gateway</title>
</head>
<body>
  <h2>Bank Account Statement Scraper</h2>
  <button onclick="scrapeData()">Scrape Statement</button>
  <table id="statementTable" border="1"></table>

  <script>
    async function scrapeData() {
      const res = await fetch('http://localhost:3000/scrape');
      const result = await res.json();
      const htmlTable = document.getElementById("statementTable");
      htmlTable.innerHTML = "<tr><th>Txn ID</th><th>UPI ID</th><th>Amount</th></tr>";

      if (result.success) {
        result.data.forEach((d) => {
          htmlTable.innerHTML += `<tr><td>${d.txn_id}</td><td>${d.upi_id}</td><td>${d.amount}</td></tr>`;
        });
      } else {
        alert("Scraping failed: " + result.message);
      }
    }
  </script>
</body>
</html>
